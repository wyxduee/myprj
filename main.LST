C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <REGX52.H>
   2          //#include <AT89x51.H>
   3          #include "stdio.h"
   4          #include <intrins.h>
   5          
   6          
   7          unsigned char receive_buff[5];
   8          unsigned char stage_flag=0;
   9          
  10          void delay(unsigned int x){
  11   1        unsigned char i;
  12   1        while(x--){
  13   2          for(i=0;i<120;i++);
  14   2        }
  15   1      }
  16          
  17          
  18          void send_str(unsigned char *s)
  19          {
  20   1        ES=0;
  21   1        if(*s=='\0')
  22   1        {
  23   2            return;
  24   2        }
  25   1        else 
  26   1        {
  27   2          while(*s!=0){
  28   3            SBUF=*s;
  29   3            while(TI==0);
  30   3            TI=0;
  31   3            s++;    
  32   3        }
  33   2        ES=1;
  34   2        
  35   2      }
  36   1      return;
  37   1      }
  38          
  39          void send_char(unsigned char c)
  40          {
  41   1          ES=0;
  42   1          SBUF=c;
  43   1          while(TI==0);
  44   1          TI=0;
  45   1          ES=1;
  46   1          return;
  47   1      }
  48          
  49          
  50          /************************************************************************/
  51              #define Imax 14000    //´Ë´¦Îª¾§ÕñÎª11.0592Ê±µÄÈ¡Öµ, 
  52              #define Imin 8000    //ÈçÓÃÆäËüÆµÂÊµÄ¾§ÕñÊ±,
  53              #define Inum1 1450    //Òª¸Ä±äÏàÓ¦µÄÈ¡Öµ¡£
  54              #define Inum2 700 
  55              #define Inum3 3000 
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 2   

  56          
  57            unsigned char f=0;
  58              unsigned char Im[4]={0x00,0x00,0x00,0x00};
  59              unsigned char show[2]={0,0};
  60              unsigned long m,Tc;
  61              unsigned char IrOK;
  62          
  63             
  64          /************************************************************************/  
  65          /************************************************************************/  
  66          //Íâ²¿ÖÐ¶Ï1½âÂë³ÌÐò
  67            void intersvr1(void) interrupt 2 using 1 //Íâ²¿ÖÐ¶Ï1
  68          {
  69   1          Tc=TH1*256+TL1;                                               //ÌáÈ¡ÖÐ¶ÏÊ±¼ä¼ä¸ôÊ±³¤
  70   1          TH1=0; 
  71   1          TL1=0;              //¶¨Ê±ÖÐ¶ÏÖØÐÂÖÃÁã
  72   1       if((Tc>Imin)&&(Tc<Imax))
  73   1            { 
  74   2              m=0;
  75   2              f=1;
  76   2              return;
  77   2            }       //ÕÒµ½ÆôÊ¼Âë
  78   1      
  79   1         if(f==1)
  80   1            {
  81   2              if(Tc>Inum1&&Tc<Inum3) 
  82   2          {
  83   3         Im[m/8]=Im[m/8]>>1|0x80; m++; 
  84   3             }
  85   2            if(Tc>Inum2&&Tc<Inum1) 
  86   2              {
  87   3               Im[m/8]=Im[m/8]>>1; m++; //È¡Âë
  88   3        }
  89   2        if(m==32) 
  90   2         {
  91   3               m=0;  
  92   3               f=0;
  93   3               if(Im[2]==~Im[3]) 
  94   3            {
  95   4                 IrOK=1; 
  96   4                if(stage_flag==0)
  97   4                {
  98   5                    if(Im[2]==0x16)
  99   5                    {
 100   6                      stage_flag=1;
 101   6                    }
 102   5      
 103   5                }
 104   4                else if(stage_flag==2)
 105   4                {
 106   5                    if(Im[2]==0x18)
 107   5                    {
 108   6                      stage_flag=3;
 109   6                    }
 110   5                }
 111   4                
 112   4         }
 113   3              else IrOK=0;   //È¡ÂëÍê³ÉºóÅÐ¶Ï¶ÁÂëÊÇ·ñÕýÈ·
 114   3           }
 115   2                     //×¼±¸¶ÁÏÂÒ»Âë
 116   2         }
 117   1       
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 3   

 118   1      }
 119          /************************************************************************/
 120          unsigned char i;
 121          unsigned int count;
 122          void rsint() interrupt 4 using 0
 123          {   
 124   1          i=0;
 125   1          count=0;
 126   1          receive_buff[i]=SBUF;
 127   1          RI=0;
 128   1        loop:
 129   1          i++;
 130   1          while(!RI){
 131   2              count++;
 132   2              if(count>130){
 133   3                receive_buff[i]='\0';
 134   3                send_str(receive_buff);
 135   3                return ;
 136   3              }
 137   2            receive_buff[i]=SBUF;
 138   2          }
 139   1          RI=0;
 140   1          count=0;
 141   1          goto loop;
 142   1      }
 143          
 144          
 145          
 146          
 147          /*********************************************************************/ 
 148          //ÓÃ¼òµ¥µÄ·½·¨¶¨ÒåÐ¡³µÔË¶¯Óï¾ä---Ö±½ÓIO¿Ú¶¨Òå
 149            #define Left_moto_go      {P1_4=1,P1_5=0,P1_6=0,P1_7=1;}    //×ó±ßÁ½¸öµç»úÏòÇ°×ß
 150            #define Left_moto_back    {P1_4=0,P1_5=1,P1_6=1,P1_7=0;}  //×ó±ßÁ½¸öµç»úÏòºó×ª
 151            #define Left_moto_Stop    {P1_4=0,P1_5=0,P1_6=0,P1_7=0;}    //×ó±ßÁ½¸öµç»úÍ£×ª                     
 152            #define Right_moto_go     {P1_0=1,P1_1=0,P1_2=0,P1_3=1;}  //ÓÒ±ßÁ½¸öµç»úÏòÇ°×ß
 153            #define Right_moto_back   {P1_0=0,P1_1=1,P1_2=1,P1_3=0;}  //ÓÒ±ßÁ½¸öµç»úÏòºó×ß
 154            #define Right_moto_Stop   {P1_0=0,P1_1=0,P1_2=0,P1_3=0;}  //ÓÒ±ßÁ½¸öµç»úÍ£×ª  
 155          
 156          /************************************************************************/
 157          //Ç°ËÙÇ°½ø
 158               void  run(void)
 159          {
 160   1          
 161   1         Left_moto_go ;   //×óµç»úÍùÇ°×ß
 162   1         Right_moto_go ;  //ÓÒµç»úÍùÇ°×ß
 163   1      }
 164          
 165          //Ç°ËÙºóÍË
 166               void  backrun(void)
 167          {
 168   1          
 169   1         Left_moto_back ;   //×óµç»úÍùÇ°×ß
 170   1         Right_moto_back ;  //ÓÒµç»úÍùÇ°×ß
 171   1      }
 172          
 173          //×ó×ª
 174               void  leftrun(void)
 175          {
 176   1          
 177   1         Left_moto_back ;   //×óµç»úÍùÇ°×ß
 178   1         Right_moto_go ;  //ÓÒµç»úÍùÇ°×ß
 179   1      }
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 4   

 180          
 181          //ÓÒ×ª
 182               void  rightrun(void)
 183          {
 184   1          
 185   1         Left_moto_go ;   //×óµç»úÍùÇ°×ß
 186   1         Right_moto_back ;  //ÓÒµç»úÍùÇ°×ß
 187   1      }
 188          //STOP
 189               void  stoprun(void)
 190          {
 191   1          
 192   1         Left_moto_Stop ;   //×óµç»úÍùÇ°×ß
 193   1         Right_moto_Stop ;  //ÓÒµç»úÍùÇ°×ß
 194   1      }
 195          
 196          
 197          /************************************************************************/
 198          //ÊýÂë¹ÜÏÔÊ¾
 199          /************************************************************************/
 200          unsigned char const discode[] ={ 0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0xBF,0xff/*-*/};
 201          unsigned char const positon[4]={ 0xfe,0xfd,0xfb,0xf7};
 202          unsigned char disbuff[4]     ={ 0,0,0,0,};
 203          
 204          /********************************************************/
 205          unsigned char posit=0;
 206              void Display_time(void)        //ÊýÂë¹ÜÉ¨Ãè
 207            {
 208   1         P0=(discode[disbuff[posit]]);
 209   1            if(posit==0)
 210   1         { P2_0=0,P2_1=1;P2_2=1;P2_3=1;}
 211   1          if(posit==1)
 212   1         { P2_0=1,P2_1=0;P2_2=1;P2_3=1;}
 213   1          if(posit==2)
 214   1         { P2_0=1,P2_1=1;P2_2=0;P2_3=1;}
 215   1          if(posit==3)
 216   1         { P2_0=1,P2_1=1;P2_2=1;P2_3=0;}
 217   1          
 218   1         //P2=positon[posit];
 219   1          if(++posit>=4)
 220   1          posit=0;
 221   1        }
 222          
 223          
 224          
 225          /************************************************************************/
 226          //¶æ»ú
 227          /************************************************************************/
 228            #define Sevro_moto_pwm     P2_7    //½Ó¶æ»úÐÅºÅ¶ËÊäÈëPWMÐÅºÅµ÷½ÚËÙ¶È
 229            unsigned char pwm_val_left  = 0;//±äÁ¿¶¨Òå
 230            unsigned char push_val_left =14;//¶æ»ú¹éÖÐ£¬²úÉúÔ¼£¬1.5MS ÐÅº
 231              unsigned int S=0;
 232            unsigned int S1=0;
 233            unsigned int S2=0;
 234            unsigned int S3=0;
 235            unsigned int S4=0;
 236            unsigned int  time=0;       //Ê±¼ä±äÁ¿
 237            unsigned int  timer=0;      //ÑÓÊ±»ù×¼±äÁ¿
 238            unsigned char timer1=0;     //É¨ÃèÊ±¼ä±äÁ¿  
 239          
 240          
 241          /************************************************************************/
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 5   

 242          /*                    PWMµ÷ÖÆµç»ú×ªËÙ                                   */
 243          /************************************************************************/
 244          /*                    ×óµç»úµ÷ËÙ                                        */
 245          /*µ÷½Úpush_val_leftµÄÖµ¸Ä±äµç»ú×ªËÙ,Õ¼¿Õ±È            */
 246              void pwm_Servomoto(void)
 247          {  
 248   1       
 249   1          if(pwm_val_left<=push_val_left)
 250   1               Sevro_moto_pwm=1; 
 251   1        else 
 252   1               Sevro_moto_pwm=0;
 253   1        if(pwm_val_left>=200)
 254   1        pwm_val_left=0;
 255   1       
 256   1      }
 257          /************************************************************************/
 258          //³¬Éù²¨
 259          /************************************************************************/
 260            #define  ECHO  P2_4          //³¬Éù²¨½Ó¿Ú¶¨Òå
 261            #define  TRIG  P2_5          //³¬Éù²¨½Ó¿Ú¶¨Òå
 262          
 263          /************************************************************************/
 264               void  StartModule()          //Æô¶¯²â¾àÐÅºÅ
 265             {
 266   1          TRIG=1;                     
 267   1          _nop_(); 
 268   1          _nop_(); 
 269   1          _nop_(); 
 270   1          _nop_(); 
 271   1          _nop_(); 
 272   1          _nop_(); 
 273   1          _nop_(); 
 274   1          _nop_(); 
 275   1          _nop_(); 
 276   1          _nop_(); 
 277   1          _nop_(); 
 278   1          _nop_(); 
 279   1          _nop_(); 
 280   1          _nop_(); 
 281   1          _nop_(); 
 282   1          _nop_(); 
 283   1          _nop_();
 284   1          _nop_(); 
 285   1          _nop_(); 
 286   1          _nop_(); 
 287   1          _nop_();
 288   1          TRIG=0;
 289   1         }
 290           /***************************************************/
 291          
 292           /***************************************************/
 293              void Conut(void)       //¼ÆËã¾àÀë
 294            {
 295   1          TH0=0;
 296   1          TL0=0;
 297   1          while(!ECHO);          //µ±RXÎªÁãÊ±µÈ´ý
 298   1          TR0=1;             //¿ªÆô¼ÆÊý
 299   1          while(ECHO);         //µ±RXÎª1¼ÆÊý²¢µÈ´ý
 300   1          TR0=0;           //¹Ø±Õ¼ÆÊý
 301   1          time=TH0*256+TL0;      //¶ÁÈ¡Âö¿í³¤¶È
 302   1          TH0=0;
 303   1          TL0=0;
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 6   

 304   1          S=(time*1.7)/100;        //Ëã³öÀ´ÊÇCM
 305   1          //disbuff[0]=S%1000/100;   //¸üÐÂÏÔÊ¾
 306   1         // disbuff[1]=S%1000%100/10;
 307   1          //disbuff[2]=S%1000%10 %10;
 308   1        }
 309          /************************************************************************/
 310          
 311          /***************************************************/
 312             void Display_length(void)          //É¨ÃèÊýÂë¹Ü
 313            {
 314   1         if(posit==0)
 315   1         {P0=(discode[disbuff[posit]])&0x7f;}//²úÉúµã
 316   1         else
 317   1         {P0=discode[disbuff[posit]];}
 318   1      
 319   1          if(posit==0)
 320   1         { P2_1=0;P2_2=1;P2_3=1;}
 321   1          if(posit==1)
 322   1          {P2_1=1;P2_2=0;P2_3=1;}
 323   1          if(posit==2)
 324   1          {P2_1=1;P2_2=1;P2_3=0;}
 325   1          if(++posit>=3)
 326   1          posit=0;
 327   1        }
 328            
 329          
 330          
 331           unsigned int timer_int_count=0;
 332           unsigned char work_time=3;
 333            
 334            
 335            
 336            //¶¨Ê±Æ÷1ÖÐ¶Ï
 337            void time1()interrupt 3   using 2
 338          { 
 339   1         TH1=(65536-100)/256;   //100US¶¨Ê±
 340   1         TL1=(65536-100)%256;
 341   1         timer++;         //¶¨Ê±Æ÷100USÎª×¼¡£ÔÚÕâ¸ö»ù´¡ÉÏÑÓÊ±
 342   1         pwm_val_left++;
 343   1         pwm_Servomoto();
 344   1      
 345   1         timer1++;         //2MSÉ¨Ò»´ÎÊýÂë¹Ü
 346   1         if(timer1>=20)
 347   1         {
 348   2         timer1=0;
 349   2         Display_time();
 350   2        timer_int_count++;
 351   2        if(timer_int_count==500)
 352   2         {
 353   3           timer_int_count=0;
 354   3           if(work_time==0)
 355   3              //work_time=20;
 356   3              stage_flag++;
 357   3           work_time--;
 358   3           disbuff[2]=work_time/10;
 359   3           disbuff[3]=work_time%10;
 360   3         }     
 361   2         }
 362   1      
 363   1      
 364   1       }
 365          /***************************************************/
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 7   

 366           unsigned int timer0_count=0;
 367          
 368            void timer0()interrupt 1   using 0
 369          { 
 370   1        
 371   1        TH0=0xf8;
 372   1        TL0=0x30;
 373   1        timer0_count++; 
 374   1       }
 375          
 376           /***************************************************/
 377          /************************************************************************/
 378           void  COMM( void )   //·½Ïòº¯Êý        
 379            {
 380   1               
 381   1           
 382   1            push_val_left=9;    //¶æ»úÏò×ó×ª90¶È
 383   1            timer=0;
 384   1            while(timer<=2000); //ÑÓÊ±400MSÈÃ¶æ»ú×ªµ½ÆäÎ»ÖÃ    4000
 385   1            StartModule();    //Æô¶¯³¬Éù²¨²â¾à
 386   1                Conut();        //¼ÆËã¾àÀë
 387   1            S2=S;  
 388   1        
 389   1            push_val_left=19;   //¶æ»úÏòÓÒ×ª90¶È
 390   1            timer=0;
 391   1            while(timer<=2000); //ÑÓÊ±400MSÈÃ¶æ»ú×ªµ½ÆäÎ»ÖÃ
 392   1            StartModule();    //Æô¶¯³¬Éù²¨²â¾à
 393   1                Conut();        //¼ÆËã¾àÀë
 394   1            S4=S;   
 395   1        
 396   1      
 397   1            push_val_left=14;   //¶æ»ú¹éÖÐ
 398   1            timer=0;
 399   1            while(timer<=2000); //ÑÓÊ±400MSÈÃ¶æ»ú×ªµ½ÆäÎ»ÖÃ
 400   1      
 401   1            StartModule();    //Æô¶¯³¬Éù²¨²â¾à
 402   1                Conut();        //¼ÆËã¾àÀë
 403   1            S1=S;   
 404   1      
 405   1                if((S2<40)||(S4<40)) //Ö»Òª×óÓÒ¸÷ÓÐ¾àÀëÐ¡ÓÚ£¬20CMÐ¡³µºóÍË
 406   1            {
 407   2            backrun();       //ºóÍË
 408   2            timer=0;
 409   2            while(timer<=1000);
 410   2            }
 411   1             
 412   1            if(S2>S4)    
 413   1               {
 414   2              rightrun();   //³µµÄ×ó±ß±È³µµÄÓÒ±ß¾àÀëÐ¡  ÓÒ×ª  
 415   2                  timer=0;
 416   2                  while(timer<=1000);
 417   2               }              
 418   1                 else
 419   1               {
 420   2                 leftrun();   //³µµÄ×ó±ß±È³µµÄÓÒ±ß¾àÀë´ó  ×ó×ª
 421   2                 timer=0;
 422   2                 while(timer<=1000);
 423   2               }
 424   1                     
 425   1      
 426   1      }
 427          
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 8   

 428          
 429          
 430          
 431          
 432          void length_count(void)
 433          {
 434   1        EX1=0;
 435   1        TH1=0;
 436   1        TL1=0;
 437   1        while(!ECHO);          //µ±RXÎªÁãÊ±µÈ´ý
 438   1        TR1=1;
 439   1        while(ECHO);         //µ±RXÎª1¼ÆÊý²¢µÈ´ý
 440   1        TR1=0;           //¹Ø±Õ¼ÆÊý
 441   1        time=TH1*256+TL1;      //¶ÁÈ¡Âö¿í³¤¶È
 442   1        S=(time*1.7)/100;        //Ëã³öÀ´ÊÇCM
 443   1        TH1=0;
 444   1        TL1=0;
 445   1        m=0;
 446   1        f=0;
 447   1        EX1=1;
 448   1        TR1=1;
 449   1      }
 450          
 451          
 452          
 453          
 454          
 455          
 456          void main(void){
 457   1      //ÏµÍ³´¦ÓÚºìÍâ½ÓÊÜ×´Ì¬£¬µÈ´ý½ÓÊÕÒ£¿ØÐÅºÅÆô¶¯¹¤×÷
 458   1        //ÐèÒªÓÃµ½µÄ¹¦ÄÜÓÐ£ººìÍâ½ÓÊÜ½âÂë,Íâ²¿ÖÐ¶Ï1ºÍ¼ÆÊýÆ÷1
 459   1        TMOD=0x10;//ÉèÖÃ¶¨Ê±Æ÷1Îª16bitÄ£Ê½
 460   1      
 461   1        IT1=1;//ÉèÖÃÍâ²¿ÖÐ¶Ï1Îª±ßÑØ´¥·¢
 462   1        EX1=1;//ÔÊÐíÍâ²¿ÖÐ¶Ï1ÖÐ¶Ï
 463   1        EA=1;//¿ªÆô×ÜÖÐ¶Ï
 464   1        TR1=1;//Æô¶¯¶¨Ê±Æ÷1
 465   1        while(!stage_flag);
 466   1        EA=0;//¹Ø±Õ×ÜÖÐ¶Ï
 467   1        EX1=0;//½ûÖ¹Íâ²¿ÖÐ¶Ï1
 468   1        TR1=0;//¹Ø±Õ¶¨Ê±Æ÷1
 469   1        
 470   1      //ÏµÍ³¿ªÊ¼¹¤×÷£¬³¬Éù²¨´ò¿ª±ÜÕÏ£¬²¢µ¹¼ÆÊ±1·ÖÖÓ
 471   1        //ÐèÒªÓÃµ½µÄ¹¦ÄÜÓÐ£º³¬Éù²¨±ÜÕÏ£¬ÊýÂë¹ÜÏÔÊ¾
 472   1      //
 473   1        TMOD=0x11;//ÉèÖÃ¶¨Ê±Æ÷0ºÍ¶¨Ê±Æ÷1Îª16bitÄ£Ê½
 474   1        TH1=(65536-100)/256;    //100US¶¨Ê±
 475   1        TL1=(65536-100)%256;
 476   1        ET1= 1;//ÔÊÐí¶¨Ê±Æ÷1ÖÐ¶Ï
 477   1        EA = 1;//¿ªÆô×ÜÖÐ¶Ï
 478   1        TR1= 1;//Æô¶¯¶¨Ê±Æ÷1
 479   1      
 480   1        push_val_left=14;
 481   1        delay(100);
 482   1        while(!(stage_flag==2))          /*ÎÞÏÞÑ­»·*/
 483   1        { 
 484   2         if(timer>=500)   //100MS¼ì²âÆô¶¯¼ì²âÒ»´Î  1000
 485   2           {
 486   3               timer=0;
 487   3             StartModule(); //Æô¶¯¼ì²â
 488   3                 Conut();     //¼ÆËã¾àÀë
 489   3                 if(S<20)     //¾àÀëÐ¡ÓÚ20CM
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 9   

 490   3             {
 491   4             stoprun();   //Ð¡³µÍ£Ö¹
 492   4             COMM();      //·½Ïòº¯Êý
 493   4             }
 494   3             else
 495   3             if(S>40)     //¾àÀë´óÓÚ£¬30CMÍùÇ°×ß
 496   3             run();
 497   3           }
 498   2      
 499   2        }
 500   1          stoprun();
 501   1         {P2_1=1;P2_2=1;P2_3=1;}
 502   1        push_val_left=14;
 503   1        delay(100);
 504   1        ET1= 0;//¹Ø±Õ¶¨Ê±Æ÷1ÖÐ¶Ï
 505   1        EA=0;//¹Ø±Õ×ÜÖÐ¶Ï
 506   1        TR1=0;//Í£Ö¹¶¨Ê±Æ÷1
 507   1      
 508   1          
 509   1      //µ¹¼ÆÊ±½áÊø£¬Ð¡³µ´ò¿ª¿ªÊ¼Ñ°ÕÒ³äµçµã·µ»Ø³äµç
 510   1        //ÐèÒªÓÃµ½µÄ¹¦ÄÜÓÐ£º³¬Éù²â¾à£¬ºìÍâ½ÓÊÜ
 511   1        //Íâ²¿ÖÐ¶Ï1 ºÍ¶¨Ê±Æ÷1 ¶¨Ê±Æ÷0 Íâ²¿ÖÐ¶Ï1ÓÃÀ´¼ì²âºìÍâÐÅºÅ£¬¶¨Ê±Æ÷1ÓÃÀ´¼ÇÂ¼³¬Éù²¨µÄÊ±³¤ ¶¨Ê±Æ÷0ÓÃÀ´¹Ì¶¨¶¨Ê±
 512   1        //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏÐòºÅ2   ¶¨Ê±Æ÷1¶ÔÓ¦ÖÐ¶ÏÐòºÅ3 ¶¨Ê±Æ÷0¶ÔÓ¦ÖÐ¶ÏÐòºÅ1
 513   1        
 514   1        TMOD=0x11;//ÉèÖÃ¶¨Ê±Æ÷0ºÍ1Îª16bit¶¨Ê±Ä£Ê½
 515   1        TH1=0;
 516   1        TL1=0;
 517   1        IT1=1;//ÉèÖÃÍâ²¿ÖÐ¶Ï1Îª±ßÑØ´¥·¢
 518   1        EX1=1;//ÔÊÐíÍâ²¿ÖÐ¶Ï1ÖÐ¶Ï
 519   1        TH0=0;
 520   1        TL0=0;
 521   1        Im[4]='\0';
 522   1        EA = 1;//¿ªÆô×ÜÖÐ¶Ï
 523   1        TR1=1;//Æô¶¯¶¨Ê±Æ÷1
 524   1        //TR0=1;//Æô¶¯¶¨Ê±Æ÷0
 525   1      
 526   1      
 527   1      while(!(stage_flag==3))
 528   1        {
 529   2          rightrun();
 530   2          delay(100);
 531   2          stoprun();
 532   2          delay(300);
 533   2      }
 534   1        stoprun();
 535   1        EX1=0;
 536   1        TR1=0;
 537   1        TR0=0;
 538   1        while(S>20)
 539   1        {
 540   2          run();
 541   2          delay(100);
 542   2          stoprun();
 543   2          StartModule();    //Æô¶¯³¬Éù²¨²â¾à
 544   2          Conut();        //¼ÆËã¾àÀë
 545   2          delay(100);
 546   2        }
 547   1        stoprun();
 548   1        
 549   1      
 550   1      }
 551          
C51 COMPILER V9.51   MAIN                                                                  05/11/2018 16:32:13 PAGE 10  

 552          
 553          
 554          
 555          
 556          
 557          
 558          
 559          
 560          
 561          
 562          
 563          
 564          
 565          
 566          
 567          
 568          
 569          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1492    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     68    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
